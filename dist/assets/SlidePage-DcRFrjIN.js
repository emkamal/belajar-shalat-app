import{u as p,r as l,j as e,a as j,b as f}from"./index-DlRkeyUT.js";async function b(){const a=await fetch("/data/toc.json");if(!a.ok)throw new Error("Failed to load TOC");return await a.json()}async function y(a){if(a==="ruku_1"){const r=await fetch("/data/bacaan/ruku_1.json");if(!r.ok)throw new Error("Failed to load content: ruku_1");return await r.json()}throw new Error(`Content not found for id: ${a}`)}function k(a,r){return!a||a.length===0?null:a.find(i=>i.kategori.includes(r))??a[0]}function v({content:a}){const{state:r}=p(),[n,i]=l.useState(()=>k(a.variasi,r.defaultVariation)?.id??null),s=l.useMemo(()=>{if(!n||!a.variasi||a.variasi.length===0)return{arab:a.arab??"",latin:a.latin??"",terjemahan:a.terjemahan??"",kategori:a.kategori};const t=a.variasi.find(o=>o.id===n);return t?{arab:t.arab,latin:t.latin,terjemahan:t.terjemahan,kategori:t.kategori}:{arab:a.arab??"",latin:a.latin??"",terjemahan:a.terjemahan??"",kategori:a.kategori}},[n,a]);return e.jsxs("div",{className:"slide",children:[a.variasi&&a.variasi.length>0&&e.jsxs("div",{className:"variation-picker",style:{display:"flex",gap:8,marginBottom:12},children:[e.jsx("button",{type:"button",onClick:()=>i(null),style:{border:"1px solid var(--color-muted)",background:n===null?"var(--color-accent)":"transparent",color:n===null?"#fff":"inherit",padding:"6px 10px",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Default"}),a.variasi.map(t=>e.jsx("button",{type:"button",onClick:()=>i(t.id),style:{border:"1px solid var(--color-muted)",background:n===t.id?"var(--color-accent)":"transparent",color:n===t.id?"#fff":"inherit",padding:"6px 10px",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:t.kategori.includes("panjang")?"Panjang":t.kategori.includes("pendek")?"Pendek":t.id},t.id))]}),r.showArab&&s.arab&&e.jsx("div",{className:"text-arabic",dir:"rtl",style:{marginTop:8},children:s.arab}),r.showLatin&&s.latin&&e.jsx("p",{style:{marginTop:10},children:s.latin}),r.showTerjemahan&&s.terjemahan&&e.jsx("p",{style:{marginTop:6,color:"var(--color-muted)"},children:s.terjemahan})]})}function c({label:a,checked:r,onChange:n,id:i}){return e.jsxs("label",{htmlFor:i,style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{id:i,type:"checkbox",checked:r,onChange:s=>n(s.target.checked)}),e.jsx("span",{children:a})]})}function T(){const{state:a,dispatch:r}=p();return e.jsx("div",{className:"toggle-group","aria-label":"Pengaturan tampilan bacaan",children:e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsx(c,{id:"toggle-arab",label:"Tampilkan Arab",checked:a.showArab,onChange:n=>r({type:"SET_SHOW_ARAB",value:n})}),e.jsx(c,{id:"toggle-latin",label:"Tampilkan Latin",checked:a.showLatin,onChange:n=>r({type:"SET_SHOW_LATIN",value:n})}),e.jsx(c,{id:"toggle-terjemahan",label:"Tampilkan Terjemahan",checked:a.showTerjemahan,onChange:n=>r({type:"SET_SHOW_TERJEMAHAN",value:n})})]})})}function S(){const{state:a,dispatch:r}=p();return e.jsx("div",{"aria-label":"Ukuran font",style:{display:"flex",gap:8},children:["small","medium","large"].map(n=>e.jsx("button",{type:"button",onClick:()=>r({type:"SET_FONT_SIZE",value:n}),style:{border:"1px solid var(--color-muted)",background:a.fontSize===n?"var(--color-accent)":"transparent",color:a.fontSize===n?"#fff":"inherit",padding:"6px 10px",borderRadius:"var(--radius-sm)",cursor:"pointer",textTransform:"capitalize"},children:n},n))})}function w({categories:a}){const r={wajib:"Wajib",sunnah:"Sunnah",pendek:"Pendek",panjang:"Panjang"};return e.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:a.map(n=>e.jsx("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:999,border:"1px solid var(--color-muted)",fontSize:12},children:r[n]},n))})}function C({file:a,alt:r}){return e.jsx("img",{src:`/illustrations/${a}`,alt:r??"Ilustrasi gerakan shalat",loading:"lazy",style:{maxWidth:"100%",borderRadius:"var(--radius-sm)"}})}function I({makna:a,dalil:r}){const[n,i]=l.useState(!1);return!a&&!r?null:e.jsxs("div",{style:{marginTop:12},children:[e.jsx("button",{type:"button",onClick:()=>i(s=>!s),style:{background:"transparent",border:"1px solid var(--color-muted)",padding:"6px 10px",borderRadius:"var(--radius-sm)",cursor:"pointer"},"aria-expanded":n,children:n?"Sembunyikan penjelasan":"Tampilkan penjelasan"}),n&&e.jsxs("div",{className:"card",style:{marginTop:8},children:[a&&e.jsx("p",{style:{marginTop:0},children:a}),r&&e.jsxs("p",{style:{marginTop:8,color:"var(--color-muted)"},children:["Dalil: ",r]})]})]})}function E({toc:a,currentId:r}){const n=j(),{prevId:i,nextId:s}=l.useMemo(()=>{const t=a.findIndex(o=>o.id===r);return t===-1?{prevId:null,nextId:null}:{prevId:t>0?a[t-1].id:null,nextId:t<a.length-1?a[t+1].id:null}},[a,r]);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:16},children:[e.jsx("button",{type:"button",disabled:!i,onClick:()=>i&&n(`/slides/${i}`),style:{opacity:i?1:.5,background:"transparent",border:"1px solid var(--color-muted)",padding:"8px 12px",borderRadius:"var(--radius-sm)",cursor:i?"pointer":"default"},children:"← Sebelumnya"}),e.jsx("button",{type:"button",disabled:!s,onClick:()=>s&&n(`/slides/${s}`),style:{opacity:s?1:.5,background:"transparent",border:"1px solid var(--color-muted)",padding:"8px 12px",borderRadius:"var(--radius-sm)",cursor:s?"pointer":"default"},children:"Selanjutnya →"})]})}function R(){const{id:a}=f(),[r,n]=l.useState(null),[i,s]=l.useState(null),[t,o]=l.useState(!0),[x,g]=l.useState([]);return l.useEffect(()=>{let d=!1;async function h(){if(a){o(!0),s(null);try{const[u,m]=await Promise.all([y(a),b()]);d||(n(u),g(m))}catch(u){d||s(u instanceof Error?u.message:"Error")}finally{d||o(!1)}}}return h(),()=>{d=!0}},[a]),e.jsx("main",{children:e.jsxs("div",{className:"card",style:{marginTop:24},children:[!a&&e.jsx("p",{children:"Invalid slide id"}),t&&e.jsx("p",{children:"Memuat…"}),i&&e.jsx("p",{style:{color:"tomato"},children:i}),!t&&!i&&r&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{style:{marginTop:0},children:r.title}),r.ilustrasi&&e.jsx(C,{file:r.ilustrasi}),e.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginTop:12},children:[e.jsx(T,{}),e.jsx(S,{})]}),e.jsx("div",{style:{marginTop:12},children:e.jsx(w,{categories:r.kategori})}),e.jsx("div",{style:{marginTop:12},children:e.jsx(v,{content:r})}),e.jsx(I,{makna:r.penjelasan?.makna,dalil:r.penjelasan?.dalil}),a&&x.length>0&&e.jsx(E,{toc:x,currentId:a})]})]})})}export{R as default};
